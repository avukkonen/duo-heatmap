{"ast":null,"code":"import React__default, { useState, useEffect, createElement } from 'react';\nvar styles = {\n  \"row\": \"_row-module__row__1EzKq\",\n  \"rowLlabel\": \"_row-module__rowLlabel__443Sh\",\n  \"rowData\": \"_row-module__rowData__2xyGV\"\n};\nconst Row = props => {\n  const {\n    label,\n    children\n  } = props;\n  return React__default.createElement(\"div\", {\n    className: styles.row\n  }, React__default.createElement(\"div\", {\n    className: styles.rowLabel\n  }, label), React__default.createElement(\"div\", {\n    className: styles.rowData\n  }, children));\n};\nvar styles$1 = {\n  \"cell\": \"_cell-module__cell__fxmnj\",\n  \"cell__data\": \"_cell-module__cell__data__2UZ1J\",\n  \"cellData\": \"_cell-module__cellData__3egf4\",\n  \"cellItem\": \"_cell-module__cellItem__36YU9\",\n  \"cellItemLabel\": \"_cell-module__cellItemLabel__ApSI-\",\n  \"cellItemValue\": \"_cell-module__cellItemValue__3vYDg\"\n};\nconst Cell = props => {\n  const {\n    item1,\n    item2,\n    colors,\n    highestValue\n  } = props;\n  const stepAmount = colors.length;\n  const cellMaxValue = item1.value + item2.value;\n  const ratio = 1 - item1.value / cellMaxValue;\n  let colorIndex = Math.round(ratio * stepAmount) - 1;\n  if (colorIndex < 0) {\n    colorIndex = 0;\n  }\n  const alpha = 1 / (highestValue / cellMaxValue);\n  const cellColor = colors[colorIndex];\n  return React__default.createElement(\"div\", {\n    className: styles$1.cell,\n    style: {\n      backgroundColor: `rgba(${cellColor.red}, ${cellColor.green}, ${cellColor.blue}, ${alpha})`\n    }\n  }, React__default.createElement(\"div\", {\n    className: 'cellData'\n  }, React__default.createElement(\"div\", {\n    className: 'cellItem'\n  }, React__default.createElement(\"span\", {\n    className: 'cellItemLabel'\n  }, item1.label), React__default.createElement(\"span\", {\n    className: 'cellItemValue'\n  }, item1.value)), React__default.createElement(\"div\", {\n    className: 'cellItem'\n  }, React__default.createElement(\"span\", {\n    className: 'cellItemLabel'\n  }, item2.label), React__default.createElement(\"span\", {\n    className: 'cellItemValue'\n  }, item2.value))));\n};\nconst DuoHeatmap = props => {\n  const {\n    modifier,\n    rows,\n    color1,\n    color2,\n    steps\n  } = props;\n  const [highestValue, setHighestValue] = useState(-1);\n  const stepsAmount = steps || 10;\n  const firstColor = color1 || '#ffffff';\n  const secondColor = color2 || '000000';\n  useEffect(() => {\n    let dataHighestValue = 0;\n    for (let r = 0; r < rows.length; r++) {\n      const currentRow = rows[r];\n      let rowHighest = 0;\n      for (let c = 0; c < currentRow.data.length; c++) {\n        const currentCellValue = currentRow.data[c].item1.value + currentRow.data[c].item2.value;\n        if (currentCellValue > rowHighest) rowHighest = currentCellValue;\n      }\n      if (rowHighest > dataHighestValue) dataHighestValue = rowHighest;\n    }\n    setHighestValue(dataHighestValue);\n  }, [highestValue]);\n  const interpolateHexColorsToRGB = (color1, color2, steps) => {\n    const c1R = parseInt(color1.slice(1, 3), 16);\n    const c1G = parseInt(color1.slice(3, 5), 16);\n    const c1B = parseInt(color1.slice(5, 7), 16);\n    const c2R = parseInt(color2.slice(1, 3), 16);\n    const c2G = parseInt(color2.slice(3, 5), 16);\n    const c2B = parseInt(color2.slice(5, 7), 16);\n    const diffR = c2R - c1R;\n    const diffG = c2G - c1G;\n    const diffB = c2B - c1B;\n    const interpolatedColors = [];\n    for (let i = 0; i < steps; i++) {\n      const ratio = i / (steps - 1);\n      const r = Math.round(c1R + ratio * diffR);\n      const g = Math.round(c1G + ratio * diffG);\n      const b = Math.round(c1B + ratio * diffB);\n      interpolatedColors.push({\n        red: r,\n        green: g,\n        blue: b\n      });\n    }\n    return interpolatedColors;\n  };\n  const rgbColors = interpolateHexColorsToRGB(firstColor, secondColor, stepsAmount);\n  return createElement(\"div\", null, createElement(\"div\", null, \"Highest value: \", highestValue), createElement(\"div\", {\n    className: `duo-heatmap ${modifier ? 'duo-heatmap--' + modifier : ''}`\n  }, rows.map((row, index) => createElement(Row, {\n    label: row.label,\n    index: index,\n    key: row.label + index\n  }, highestValue === -1 ? null : row.data.map(cell => createElement(Cell, {\n    key: cell.id,\n    highestValue: highestValue,\n    colors: rgbColors,\n    item1: cell.item1,\n    item2: cell.item2\n  }))))));\n};\nexport { DuoHeatmap };","map":{"version":3,"mappings":"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","names":["Row","props","label","children","React","className","styles","row","rowLabel","rowData","Cell","item1","item2","colors","highestValue","stepAmount","length","cellMaxValue","value","ratio","colorIndex","Math","round","alpha","cellColor","cell","style","backgroundColor","red","green","blue","DuoHeatmap","modifier","rows","color1","color2","steps","setHighestValue","stepsAmount","firstColor","secondColor","dataHighestValue","r","currentRow","rowHighest","c","data","currentCellValue","interpolateHexColorsToRGB","c1R","parseInt","slice","c1G","c1B","c2R","c2G","c2B","diffR","diffG","diffB","interpolatedColors","i","g","b","push","rgbColors","map","index","key","id"],"sources":["../src/components/row/row-component.tsx","../src/components/cell/cell-component.tsx","../src/index.tsx"],"sourcesContent":["import React from 'react'\nimport styles from './row.module.scss'\nimport { ICell } from '../cell/cell-component'\n\nexport interface IRow {\n  label: string\n  data: ICell[]\n}\n\ninterface Props {\n  label: string\n  index: number\n}\n\nconst Row: React.FC<Props> = (props) => {\n  const { label, children } = props\n\n  return (\n    <div className={styles.row}>\n      <div className={styles.rowLabel}>{label}</div>\n      <div className={styles.rowData}>{children}</div>\n    </div>\n  )\n}\n\nexport default Row\n","import React from 'react'\nimport styles from './cell.module.scss'\n\nexport interface Item {\n  label: string\n  value: number\n}\n\nexport interface ICell {\n  id: number\n  item1: Item\n  item2: Item\n}\n\nexport interface RGB {\n  red: number\n  green: number\n  blue: number\n}\n\nexport interface Props {\n  colors: RGB[]\n  highestValue: number\n  item1: Item\n  item2: Item\n}\n\nconst Cell: React.FC<Props> = (props) => {\n  const { item1, item2, colors, highestValue } = props\n  const stepAmount = colors.length\n\n  //  maximum value of the items values\n  const cellMaxValue = item1.value + item2.value\n\n  // ratio of the two values inverted\n  const ratio = 1 - item1.value / cellMaxValue\n\n  // calculated index of the color lerp\n  let colorIndex = Math.round(ratio * stepAmount) - 1\n\n  // sometimes the index is -1 and then it must be 0 or there will be pain\n  if (colorIndex < 0) {\n    colorIndex = 0\n  }\n  // alpha value of the total highest value of the given range\n  const alpha = 1 / (highestValue / cellMaxValue)\n  const cellColor = colors[colorIndex]\n\n  return (\n    <div\n      className={styles.cell}\n      style={{\n        backgroundColor: `rgba(${cellColor.red}, ${cellColor.green}, ${cellColor.blue}, ${alpha})`\n      }}\n    >\n      <div className='cellData'>\n        <div className='cellItem'>\n          <span className='cellItemLabel'>{item1.label}</span>\n          <span className='cellItemValue'>{item1.value}</span>\n        </div>\n        <div className='cellItem'>\n          <span className='cellItemLabel'>{item2.label}</span>\n          <span className='cellItemValue'>{item2.value}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Cell\n","import * as React from 'react'\nimport Row, { IRow } from './components/row/row-component'\nimport Cell from './components/cell/cell-component'\n\ninterface DuoHeatmapProps {\n  rows: IRow[]\n  color1?: string\n  color2?: string\n  steps?: number\n  modifier?: string\n}\n\nexport const DuoHeatmap: React.FC<DuoHeatmapProps> = (props) => {\n  const { modifier, rows, color1, color2, steps } = props\n  const [highestValue, setHighestValue] = React.useState(-1)\n  const stepsAmount = steps || 10\n  const firstColor = color1 || '#ffffff'\n  const secondColor = color2 || '000000'\n\n  React.useEffect(() => {\n    let dataHighestValue = 0\n    for (let r = 0; r < rows.length; r++) {\n      const currentRow = rows[r]\n      let rowHighest = 0\n\n      for (let c = 0; c < currentRow.data.length; c++) {\n        const currentCellValue =\n          currentRow.data[c].item1.value + currentRow.data[c].item2.value\n        if (currentCellValue > rowHighest) rowHighest = currentCellValue\n      }\n      if (rowHighest > dataHighestValue) dataHighestValue = rowHighest\n    }\n\n    setHighestValue(dataHighestValue)\n  }, [highestValue])\n\n  /**\n   * Turns two hex colors to a lerp of rgb values\n   * @param color1 first color in hex\n   * @param color2 second color in hex\n   * @param steps amount of steps\n   * @returns\n   */\n  const interpolateHexColorsToRGB = (\n    color1: string,\n    color2: string,\n    steps: number\n  ) => {\n    // Parse the hex colors into RGB values\n    const c1R = parseInt(color1.slice(1, 3), 16)\n    const c1G = parseInt(color1.slice(3, 5), 16)\n    const c1B = parseInt(color1.slice(5, 7), 16)\n\n    const c2R = parseInt(color2.slice(1, 3), 16)\n    const c2G = parseInt(color2.slice(3, 5), 16)\n    const c2B = parseInt(color2.slice(5, 7), 16)\n\n    // Calculate the difference between the two colors\n    const diffR = c2R - c1R\n    const diffG = c2G - c1G\n    const diffB = c2B - c1B\n\n    const interpolatedColors = []\n\n    // Create the interpolated array of colors\n    for (let i = 0; i < steps; i++) {\n      const ratio = i / (steps - 1)\n      const r = Math.round(c1R + ratio * diffR)\n      const g = Math.round(c1G + ratio * diffG)\n      const b = Math.round(c1B + ratio * diffB)\n\n      interpolatedColors.push({ red: r, green: g, blue: b })\n    }\n\n    return interpolatedColors\n  }\n\n  const rgbColors = interpolateHexColorsToRGB(\n    firstColor,\n    secondColor,\n    stepsAmount\n  )\n\n  return (\n    <div>\n      <div>Highest value: {highestValue}</div>\n      <div\n        className={`duo-heatmap ${modifier ? 'duo-heatmap--' + modifier : ''}`}\n      >\n        {rows.map((row, index) => (\n          <Row label={row.label} index={index} key={row.label + index}>\n            {highestValue === -1\n              ? null\n              : row.data.map((cell) => (\n                  <Cell\n                    key={cell.id}\n                    highestValue={highestValue}\n                    colors={rgbColors}\n                    item1={cell.item1}\n                    item2={cell.item2}\n                  />\n                ))}\n          </Row>\n        ))}\n      </div>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}